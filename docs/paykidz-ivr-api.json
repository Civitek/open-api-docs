{
  "openapi": "3.0.1",
  "info": {
    "title": "PayKidz API Specifications",
    "version": "1.0.0",
    "description": "API to manage and track PayKidz IVR payment transactions."
  },
  "servers": [
    {
      "url": "https:testapi.civikestpayment.com",
      "description": "Generated server url"
    }
  ],
  "security": [
    {
      "bearerAuth": []
    }
  ],
  
  "paths": {
    "/payment/ivr": {
      "post": {
        "tags": [
          "Payment Service"
        ],
        "summary": "Start IVR payment process",
        "description": "This method is used to initiate child support payments via our payment processing service. It will accept an payment request to identify the type of payment, payment amount and any other identifying data. It will initiate the payment in the system and return an Order Id that uniquely identifies this payment transaction.",
        "operationId": "ivrPayment",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/IVRRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/IvrResponse"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "CustomerIdentity": {
        "type": "object",
        "properties": {
          "identityTypeId": {
            "type": "integer",
            "description": "Valid values: 1=SSN, 2=Passport, 4=Alien Registration Number for Identity One; 0=Other, 3=Driverâ€™s License for Identity Two",
            "format": "int32",
            "example": 1
          },
          "value": {
            "type": "string"
          },
          "countryCode": {
            "type": "string",
            "description": "Country code",
            "example": "US"
          },
          "region": {
            "type": "string",
            "description": "Region/state code",
            "example": "CA"
          }
        }
      },
      "IVRCustomer": {
        "required": [
          "firstName",
          "lastName",
          "phone"
        ],
        "type": "object",
        "properties": {
          "firstName": {
            "type": "string",
            "description": "First Name of the customer making the payment. Optional."
          },
          "lastName": {
            "type": "string",
            "description": "Last Name of the customer making the payment. Optional."
          },
          "middleName": {
            "type": "string",
            "description": "Middle Name of the customer making the payment. Optional."
          },
          "phone": {
            "type": "string",
            "description": "Phone number of the customer making the payment. Optional."
          },
          "email": {
            "type": "string",
            "description": "Email of the customer making the payment. Optional."
          },
          "identities": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CustomerIdentity"
            }
          }
        }
      },
      "IVRRequest": {
        "required": [
          "amount",
          "caseNumber",
          "customer",
          "firstName",
          "lastName",
          "ssn",
          "stateCode"
        ],
        "type": "object",
        "properties": {
          "stateCode": {
            "type": "string",
            "description": "State code is requried."
          },
          "ssn": {
            "type": "string",
            "description": "SSN is requried."
          },
          "caseNumber": {
            "type": "string",
            "description": "Case Number is required."
          },
          "firstName": {
            "type": "string",
            "description": "Case Number is required."
          },
          "lastName": {
            "type": "string"
          },
          "amount": {
            "minimum": 1,
            "exclusiveMinimum": false,
            "type": "number",
            "description": "This is the payment amount."
          },
          "customer": {
            "$ref": "#/components/schemas/IVRCustomer"
          }
        }
      },
      "IvrResponse": {
        "type": "object",
        "properties": {
          "orderId": {
            "type": "integer",
            "description": "This is a unique identifier for the payment transaction. It is generated by Civitek and returned to the partner who initiated the payment.",
            "format": "int64"
          },
          "status": {
            "type": "string",
            "description": "This indicates the success or failure of creating an OrderId for the payment transaction.",
            "example": "success",
            "enum": [
              "success",
              "failed"
            ]
          },
          "errorMessage": {
            "type": "string",
            "description": "This is an error message returned in case the OrderId could not be created. This will be null if the OrderId was created successfully."
          },
          "amount": {
            "type": "number",
            "description": "This is the payment amount that was passed in the Order Request."
          },
          "feeAmount": {
            "type": "number",
            "description": "This is the fee amount that is charged for processing the payment."
          },
          "totalAmount": {
            "type": "number",
            "description": "his is the total amount that is charged for the payment, including the fee amount."
          },
          "caseNumber": {
            "type": "string",
            "description": "This is the case number for which the payment is being made. It is passed in the Order Request."
          }
        }
      }
    },
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "description": "Please provide the JWT token. For login information, please contact support.",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    }
  }
}